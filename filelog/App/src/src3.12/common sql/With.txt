 IF OBJECT_ID('tempdb..' + '#tempOrg') IS not NULL begin drop table #tempOrg end
                 create table #tempOrg  (

			 name nvarchar(10),
			 childname  nvarchar(10))
			 
                   insert into #tempOrg values('S6900078','CL4')--Ng Kay Hiong Ronnie Sales Coach
                   insert into #tempOrg values('S7710133','CL2')--Ong Hui Min Visual Merchandising Comms Mgr
                   insert into #tempOrg values('S7710133','CL4')--Ong Hui Min Visual Merchandising Comms Mgr
                   insert into #tempOrg values('S7340158','CL1')--JORDAN TAN JEE PHONG	Sales Coach
                   insert into #tempOrg values('S7340158','CL2')--JORDAN TAN JEE PHONG	Sales Coach
                   insert into #tempOrg values('S1550070','CL1')--Zawiah Mohamad	Visual Merchandising Comms Mgr
                   insert into #tempOrg values('S1550070','CL3')--Zawiah Mohamad	Visual Merchandising Comms Mgr
                   insert into #tempOrg values('S1530069','CL3')
                                 declare @tempteamid varchar(10)
                                 declare @staffidrole varchar(10)=(select top 1 staffid from scStaffProfile where NRIC=@NRIC)
                                IF (SELECT COUNT(*) FROM #tempOrg WHERE name =@staffidrole )>0
		        BEGIN
		      
		         declare teamid_cursor cursor for select childname from #tempOrg where name=@staffidrole ORDER BY  childname
		         open  teamid_cursor
		          fetch next  from teamid_cursor  into @tempteamid		         		          
		          while @@FETCH_STATUS=0
		           begin
		            
                                          ; with hgo as
			(
			  select ChildTeamID,2 as levelTemp from scTeamChildRel
			  where ParentTeamID = @tempteamid
			  union all
			 select d.ChildTeamID,levelTemp+1 from hgo c inner join scTeamChildRel d
			 on c.ChildTeamID = d.ParentTeamID
			)
			 insert into #teamlist
			 select  ChildTeamID teamid,levelTemp line  from hgo
		             union   
                                     select  TeamID,1 from scTeam where TeamID=@tempteamid
		               
		            fetch next from teamid_cursor into @tempteamid   
		               
		           end
		          
		           close  teamid_cursor
		           DEALLOCATE  teamid_cursor
		           
		        end
		         
     end
       IF OBJECT_ID('tempdb..' + '#tempOrg') IS not NULL begin drop table #tempOrg end